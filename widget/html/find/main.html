<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/mzui.css" />
    <!-- <link rel="stylesheet" type="text/css" href="../../css/mian_content.css" /> -->

    <style>
        #search-header {
            /*margin-top: -3rem;*/
        }

        .search-header-search {
            position: absolute;
            bottom: 0.4rem;
            left: 7rem;
            right: 0.75rem;
            height: 1.7rem;
            line-height: 1.7rem;
            background-color: rgb(232, 232, 232);
            border-radius: 1.7rem;
            color: rgb(153, 153, 153);
            font-size: 0.7rem;
            text-align: center;
        }

        .search-header-search .search-icon {
            margin-left: 1rem;
        }

        .search-header-search .seach-content {
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <header>
        <!-- <div class="header-item" id="search-header">
            <div class="search-header-citylist">
                <span class="currentCity">阳光学院</span>
                <img src="../../image/header/arrow_down_groupbuy.png">
            </div>
            <div class="search-header-search" topmod onclick="fnOpenSearchWin()">
                <img src="../../image/header/search_groupbuy.png"> 东区西瓜
            </div>
        </div> -->
        <div class="heading find-seach-title">
            <div class="title">
                <strong>阳光学院</strong>
                <i class="icon icon-chevron-down"></i>
            </div>
            <nav class="nav search-header-search" topmod onclick="fnOpenSearchWin()">
                <div class="search-icon"><i class="icon icon-search"></i> </div>
                <div class="seach-content">东区西瓜aaa </div>
            </nav>
        </div>
        <nav class="nav gray justified find-nav">
            <a topmod onclick="fnSwitchFindFrameGroup(0)">即时</a>
            <a topmod onclick="fnSwitchFindFrameGroup(1)">顺风</a>
            <a topmod onclick="fnSwitchFindFrameGroup(2)">替身</a>
            <a topmod onclick="fnSwitchFindFrameGroup(3)">技能</a>
        </nav>

    </header>

</body>
<script type="text/javascript" src="../../script/api.js"></script>

<script type="text/javascript">
    var framesGroup = [];
    var header = $api.dom('header');
    headerHeight = $api.offset(header).h;
    // var NVNavigationBarrHeight = 42;
    var frames = ['immediate', 'tailwind', 'substitute', 'skill'];
    for (var i = 0; i < frames.length; i++) {
        framesGroup.push({
            name: frames[i],
            url: frames[i] + '.html',
            bgColor: '#fff'
        })
    };
    apiready = function() {

        $api.fixStatusBar(header);

        // fnOpenNVNavigationBar();

        fnOpenFindMainFrameGroup();

    };

    // 四大类目 使用NVNavigationBar模块
    function fnOpenNVNavigationBar() {
        var NVNavigationBar = api.require('NVNavigationBar');
        NVNavigationBar.open({
            // 摆放位置
            rect: {
                //模块左上角的x坐标, 默认：0
                x: 0,
                //模块左上角的y坐标, 默认：0
                y: headerHeight + 20,
                //模块的宽度 默认当前frame或windown的宽度
                w: api.frameWidth,
                //模块的高度 默认当前frame或windown的高度
                h: NVNavigationBarrHeight,
            },
            // 模块样式配置
            styles: {
                // 导航条方向 可选 vertical(垂直)、horizontal(水平)  默认 horizontal
                orientation: 'horizontal',
                // 导航条背景   支持 rgb、rgba、#、img；默认：#6b6b6b
                bg: '#6b6b6b',
                // 背景透明的配置，取值范围：0-1；默认：1
                bgAlpha: 1,
                // 字体配置
                font: {
                    // 导航项字体大小；默认：14
                    size: 14,
                    // 选中时导航项字体大小；默认：14
                    sizeSelected: 18,
                    // 导航条字体颜色，支持rgb、rgba、#；默认：#FFFFFF
                    color: '#FFFFFF',
                    // 选中时导航条字体颜色，支持rgb、rgba、#；默认：#FFFFFF
                    colorSelected: '#ff0000',
                    // 背景透明度，取值范围：0-1；默认：1
                    alpha: 1,
                },
                // item大小配置
                itemSize: {
                    // 单个导航项的宽度；默认为导航条宽度/导航项个数
                    // w: 90,
                    // 单个导航项的高度；默认为导航条高度/导航项个数
                    // h: 44
                }
            },
            // 按钮项数据
            items: [{
                title: '即时',
                bg: '#BBFFFF',
                bgSelected: '#ff00000'
            }, {
                title: '顺风',
                bg: '#BBFFFF',
                bgSelected: '#FFA500'
            }, {
                title: '替身',
                bg: '#BBFFFF',
                bgSelected: '#FFA500'
            }, {
                title: '技能',
                bg: '#BBFFFF',
                bgSelected: '#FFA500'
            }],
            // 被选中的导航项的下标，不传表示不选中任何 item
            selectedIndex: 0,
            // 块视图添加到指定 frame 的名字   默认：模块依附于当前 window
            fixedOn: api.frameName,
            // 是否将模块视图固定到窗口上，不跟随窗口上下滚动    默认值：true
            fixed: false,
            // 导航条的id(字符串)
            id: 'searchNVNavigationBar'
        }, function(ret, err) {
            console.log(JSON.stringify(ret));
        });
    };

    // 打开发现主体内容页
    function fnOpenFindMainFrameGroup() {
        api.openFrameGroup({
            name: 'findMainFrameGroup',
            background: '#fff',
            scrollEnabled: false,
            rect: {
                x: 0,
                y: headerHeight+50,
                w: api.frameWidth,
                h: api.frameHeight,
            },
            index: 0,
            frames: framesGroup,
        }, function(ret, err) {
            // if (ret) {
            //     alert(JSON.stringify(ret));
            // } else {
            //     alert(JSON.stringify(err));
            // }
        });

    }

    function fnSwitchFindFrameGroup(index) {

    }
    // 搜索框  使用 UISearchBar 模块
    function fnOpenSearchWin() {
        var UISearchBar = api.require('UISearchBar');
        UISearchBar.open({
            // 默认文字
            placeholder: '肉骨茶',
            // 历史记录条数
            historyCount: 10,
            // 是否显示录音按钮 因此模块无语音功能 暂设置为false
            showRecordBtn: false,
            // 设置显示的文字
            texts: {
                cancelText: '取消',
                clearText: '清除搜索记录'
            },
            styles: {
                // 导航栏样式
                navBar: {
                    // 导航栏背景色
                    bgColor: '#FFFFFF',
                    // 导航栏线框颜色
                    borderColor: '#ccc'
                },
                // 搜索框样式
                searchBox: {
                    // 搜索框图片  默认有自带一个
                    bgImg: '',
                    // 搜索框文本颜色
                    color: '#000',
                    // 搜索框高度
                    height: 44
                },
                // 取消按钮样式
                cancel: {
                    // 取消按钮背景  支持样式或图片
                    bg: 'rgba(0,0,0,0)',
                    // 取消按钮字体颜色
                    color: '#D2691E',
                    // 取消按钮字体大小
                    size: 16
                },
                // 历史记录列表样式
                list: {
                    // 文字颜色
                    color: '#696969',
                    // 背景颜色
                    bgColor: '#FFFFFF',
                    // 边框颜色
                    borderColor: '#eee',
                    // 字体大小
                    size: 16
                },
                // 清除历史记录按钮的样式
                clear: {
                    // 文字颜色
                    color: '#000000',
                    // 边框颜色
                    borderColor: '#ccc',
                    // 字体大小
                    size: 16
                }
            }
        }, function(ret, err) {
            if (ret) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    };

    function fnOpenSearchWin_old() {
        api.openWin({
            name: 'find_search_win',
            url: 'search_win.html',
            pageParam: {
                name: 'test'
            }
        });
    };

    function myAjaxTest() {
        api.ajax({
            url: 'http://test.zhengkai.site/eros-core-server/index/test',
            method: 'get',
        }, function(ret, err) {
            if (ret) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });

    };
</script>

</html>
