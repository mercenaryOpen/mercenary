<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/mzui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/find_content.css" />

    <style>
        .mer-mission {
            height: 6.5rem;
        }
    </style>
</head>

<body>
    <div id="maincontent">
        <div class="home-tuan-list" v-for="(item, key) in findItems">
            <div class="mer-mission" topmod v-on:click="fnOpenGrabSingleWin()">
                <div class="mer-mission-top">
                    <div class="mer-mission-left">
                        <div class="avatar-lg circle mer-portrait">
                            <img src="../../image/my/profile_default.png" alt="">
                        </div>
                        <div class="mer-avatar-right">
                            <div class="mer-employer">
                                <div class="mer-user-nickename">
                                    <p>{{item.username}}</p>
                                </div>
                                <div class="mer-mission-type">
                                    <span class="label success">送餐</span>
                                </div>
                            </div>
                            <div class="mer-mission-time">
                                {{key+1}}分钟前
                            </div>
                        </div>
                    </div>
                    <div class="mer-mission-right">
                        <div class="mer-mission-deposit">
                            <span class="label success mer-icon">押</span>
                            <span class="mer-money">999999.99</span>
                        </div>
                        <div class="mer-mission-commission">
                            <span class="label success mer-icon">赏</span>
                            <span class="mer-money">100.99</span>
                        </div>
                    </div>
                </div>
                <div class="mer-mission-bottom">
                    <div class="mer-mission-datetime">
                        <i class="icon icon-time"></i>
                        <span>06月11日 16:25 </span>
                    </div>
                    <div class="mer-mission-addr">
                        <div class="addr-icon">
                            <i class="icon icon-venus"></i>
                        </div>
                        <div class="addr">
                            <span class="from">东区餐厅二楼三#窗</span>
                            <span class="dao">到 </span>
                            <span class="to">西区10#110 </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type=" text/javascript " src="../../script/api.js "></script>
<script type="text/javascript " src="../../script/vue.min.js "></script>
<script type="text/javascript ">
    var maincontent = new Vue({
        el: '#maincontent',
        created() {
            this.findItems = [{
                username: "qyqyqyqy"
            }]
        },
        data: {
            findItems: [],
            pageSize: 10,
            page: 1
        },
        methods: {
            fnAjaxFind: function() {
                var tempArray = [{
                    username: "祁缘",
                }, {
                    username: "祁缘11",
                }, {
                    username: "祁缘1111",
                }, {
                    username: "祁缘111111",
                }, {
                    username: "祁缘11111111",
                }, ];

                for (var i = 0; i < tempArray.length; i++) {
                    this.findItems.push(tempArray[i]);
                }

            },

            fnOpenGrabSingleWin: function() {
                var winName = 'grabSingle_' + 'kuaidi';
                api.openWin({
                    name: winName,
                    url: winName + '.html',
                    pageParam: {
                        name: 'test'
                    }
                });
            }
        },

    });


    apiready = function() {
        // 下拉刷新
        api.setRefreshHeaderInfo({
            // 设置是否可见
            visible: true,
            // 上拉刷新时的图片地址
            loadingImg: 'widget://image/loading_more.png',
            // 背景颜色
            bgColor: '#ccc',
            // 文本颜色
            textColor: '#fff',
            // 下拉文字描述
            textDown: '下拉刷新...',
            textUp: '松开刷新...',
            // 是否显示更新时间
            showTime: true,
        }, function(ret, err) {
            //在这里从服务器加载数据，加载完成后调用api.refreshHeaderLoadDone()方法恢复组件到默认状态
            maincontent.fnAjaxFind();
            api.refreshHeaderLoadDone();
        });

        //上拉加载 (自己监听页面是否达到底部)
        api.addEventListener({
            name: 'scrolltobottom',
            extra: {
                threshold: 0 //设置距离底部多少距离时触发，默认值为0，数字类型
            }
        }, function(ret, err) {
            maincontent.fnAjaxFind();
        });
    };
</script>

</html>
